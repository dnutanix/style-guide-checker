<p>
  <ac:structured-macro ac:macro-id="c15e0e6b-8b7f-4df1-aea8-95370f3c06f3" ac:name="toc" ac:schema-version="1"/>
</p>
<h1>Overview</h1>
<p>In this section, you'll learn about the different varieties of Phoenix and when to use a stand-alone Phoenix ISO. We'll also cover key concepts, features that use Phoenix, and practical tips for SREs.</p>
<h1>Key Concepts of Phoenix</h1>
<ul>
  <li>Phoenix is a Rocky Linux-based OS for installing and configuring Nutanix nodes.</li>
  <li>It is typically generated from a running CVM or Foundation VM, but can also be downloaded from the Nutanix Portal or Amazon S3.</li>
  <li>Phoenix is based on Foundation code and follows the same versioning. Bugs in Foundation may be present in Phoenix ISOs created with it.</li>
  <li>It is usually mounted to a host via IPMI or similar out-of-band management.</li>
  <li>Some features stage Phoenix files on the hypervisor boot disk and modify GRUB to boot Phoenix on restart.</li>
  <li>For more details, see the <a href="https://portal.nutanix.com/page/documents/details?targetId=Field-Installation-Guide-v5_9:Field-Installation-Guide-v5_9">Field Installation Guide</a> and <a href="http://portal.nutanix.com/kb/5591">KB-5591</a>.</li>
</ul>
<p>
  <ac:image ac:height="400">
    <ri:url ri:value="https://confluence.eng.nutanix.com:8443/download/attachments/431328253/phoenix_bare_metal.png?version=1&amp;modificationDate=1752515130498&amp;api=v2"/>
  </ac:image>
</p>
<h1>Varieties of Phoenix</h1>
<p>The term "Phoenix" can refer to several different workflows. Here are the three main ways a node can boot into Phoenix:</p>
<ol>
  <li>
    <strong>Manual ISO Mount:</strong> A user mounts a Phoenix ISO via IPMI, changing the boot order so the node boots from the ISO.</li>
  <li>
    <strong>Feature-Staged Boot:</strong> Nutanix features (like LCM) stage Phoenix files on the boot disk and modify GRUB to boot Phoenix on restart.</li>
  <li>
    <strong>Network ISO Mount:</strong> Foundation or Cluster Expand mounts a Phoenix ISO to the BMC over the network.</li>
</ol>
<ac:structured-macro ac:macro-id="19b668cd-7f56-4b6a-be62-6ee8af677381" ac:name="tip" ac:schema-version="1">
  <ac:parameter ac:name="title">Tip</ac:parameter>
  <ac:rich-text-body>
    <p>Check recent tasks in Prism UI to see which feature was used, then follow the troubleshooting guidelines for that workflow.</p>
  </ac:rich-text-body>
</ac:structured-macro>
<h1>Features That Use Phoenix</h1>
<p>While this guide focuses on stand-alone Phoenix, it's important to know about other features that use Phoenix so you can troubleshoot effectively. Expand each section below to see a focused table for each feature.</p>
<ac:structured-macro ac:macro-id="d2c312e5-c2a8-4e97-94c2-d84368c99ac0" ac:name="expand" ac:schema-version="1">
  <ac:parameter ac:name="title">Foundation</ac:parameter>
  <ac:rich-text-body>
    <table class="wrapped">
      <tbody>
        <tr>
          <th>Feature</th>
          <th>How it Uses Phoenix</th>
          <th>How it boots in Phoenix</th>
          <th>How to boot out of Phoenix</th>
        </tr>
        <tr>
          <td>Foundation</td>
          <td>Foundation uses Phoenix as bare-metal OS with which it can communicate over the network while it images the CVM and hypervisor of the target node. Foundation will configure bond0 on the Phoenix instance with the IP address of the CVM it is intending to configure on that node. The progress of the imaging is then communicated between Phoenix and the Foundation server.</td>
          <td>Phoenix ISO is mounted to the BMC of a node over the network.</td>
          <td>
            <ul>
              <li>If there is a working hypervisor already installed: Run the reboot_to_host.py script from the Phoenix shell.</li>
              <li>If there is no hypervisor installed: iKVM Reset or BMC warm reset from the IPMI Web UI, then reboot the host.</li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
  </ac:rich-text-body>
</ac:structured-macro>
<ac:structured-macro ac:macro-id="fe0e5701-7c2b-4645-9990-6699771c98d8" ac:name="expand" ac:schema-version="1">
  <ac:parameter ac:name="title">Cluster Expand</ac:parameter>
  <ac:rich-text-body>
    <table class="wrapped">
      <tbody>
        <tr>
          <th>Feature</th>
          <th>How it Uses Phoenix</th>
          <th>How it boots in Phoenix</th>
          <th>How to boot out of Phoenix</th>
        </tr>
        <tr>
          <td>Cluster Expand</td>
          <td>Similar to Foundation, the Cluster Expand feature mounts Phoenix using a network-based utility that communicates with the BMC on the target node. One key difference is that Cluster Expand requires that the CVM on that node be running and in an unconfigured state in order for it to be discoverable, whereas Foundation has no such dependencies. The Expand Cluster feature should also be able to discover nodes that are running <a href="https://confluence.eng.nutanix.com:8443/display/STK/Discovery+OS%3A+Expand+Cluster+WF">Discovery OS</a>. Cluster Expand will configure bond0 on the Phoenix instance with the IP address of the CVM it is intending to configure on that node. The progress of the imaging is then communicated between Phoenix and the running cluster (i.e. to the Genesis Leader CVM and the Foundation service running there).</td>
          <td>The Foundation service on a running CVM will mount a Phoenix ISO to the node being added and then that node will be rebooted into the phoenix shell, where imaging will take place.</td>
          <td>
            <ul>
              <li>If there is a working hypervisor already installed: Run the reboot_to_host.py script from the Phoenix shell.</li>
              <li>If there is no hypervisor installed: iKVM Reset or BMC warm reset from the IPMI Web UI, then reboot the host.</li>
            </ul>
            <ac:structured-macro ac:macro-id="23e74878-be6f-41c0-bb53-df64dd84f68d" ac:name="note" ac:schema-version="1">
              <ac:rich-text-body>
                <p>Note that you are exposed to any bugs or limitations present in the version of Foundation running on your primary cluster. For this reason, it's always a good idea to upgrade Foundation software on the cluster before adding a node.</p>
              </ac:rich-text-body>
            </ac:structured-macro>
          </td>
        </tr>
      </tbody>
    </table>
  </ac:rich-text-body>
</ac:structured-macro>
<ac:structured-macro ac:macro-id="59ee1577-41ca-4e11-abfa-9100273db97d" ac:name="expand" ac:schema-version="1">
  <ac:parameter ac:name="title">Discovery OS</ac:parameter>
  <ac:rich-text-body>
    <table class="wrapped">
      <tbody>
        <tr>
          <th>Feature</th>
          <th>How it Uses Phoenix</th>
          <th>How it boots in Phoenix</th>
          <th>How to boot out of Phoenix</th>
        </tr>
        <tr>
          <td>Discovery OS</td>
          <td>When Nutanix nodes are shipped to countries outside of the United States, they come running a Phoenix-based "Discovery OS" instead of the regular AHV hypervisor. <a href="https://confluence.eng.nutanix.com:8443/display/STK/Bare+Metal+Discovery+OS">Follow this link to learn more about Discovery OS</a>.</td>
          <td>In this case, the node is running Phoenix natively. In other words, Phoenix is the operating system actually installed on the host boot disk.</td>
          <td>Install your desired hypervisor.</td>
        </tr>
      </tbody>
    </table>
  </ac:rich-text-body>
</ac:structured-macro>
<ac:structured-macro ac:macro-id="e113e111-6692-4ea3-a37a-1b705a5733f3" ac:name="expand" ac:schema-version="1">
  <ac:parameter ac:name="title">Stand-Alone Phoenix</ac:parameter>
  <ac:rich-text-body>
    <table class="wrapped">
      <tbody>
        <tr>
          <th>Feature</th>
          <th>How it Uses Phoenix</th>
          <th>How it boots in Phoenix</th>
          <th>How to boot out of Phoenix</th>
        </tr>
        <tr>
          <td>Stand-Alone Phoenix</td>
          <td>This is a user-driven workflow rather than part of a feature's automated actions. This Phoenix L1 module will explain all that you need to know. By default, there is no network configuration provided in Phoenix. The only way to interact with the Installer Menu or the shell is by IPMI Remote Console. <a href="http://portal.nutanix.com/kb/5346">However, it is possible to manually configure the network so that you can SSH into Phoenix.</a>
          </td>
          <td>The user manually mounts a Phoenix ISO to a given node using the remote console in the IPMI Web UI. This modifies the device boot order in the BIOS such that a "Virtual CD" is now at the top of the boot order instead of the usual hypervisor boot disk. Once the host is rebooted, it will load phoenix and ultimately land at the phoenix shell or the Installer Menu.</td>
          <td>
            <ul>
              <li>If there is a working hypervisor already installed: Run the reboot_to_host.py script from the Phoenix shell.</li>
              <li>If there is no hypervisor installed: Check if there is an ISO currently mounted in the IPMI Web UI. If there is not, perform an iKVM Reset or BMC warm reset from the IPMI Web UI, then reboot the host.</li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
  </ac:rich-text-body>
</ac:structured-macro>
<ac:structured-macro ac:macro-id="a3ce2486-4259-452d-8189-2f7d049c5395" ac:name="expand" ac:schema-version="1">
  <ac:parameter ac:name="title">LCM</ac:parameter>
  <ac:rich-text-body>
    <table class="wrapped">
      <tbody>
        <tr>
          <th>Feature</th>
          <th>How it Uses Phoenix</th>
          <th>How it boots in Phoenix</th>
          <th>How to boot out of Phoenix</th>
        </tr>
        <tr>
          <td>LCM</td>
          <td>LCM uses Phoenix as a staging area when it wants to perform certain firmware upgrades. As of LCM framework version 3.2, all non-Redfish firmware upgrades are performed through the <a href="https://confluence.eng.nutanix.com:8443/display/SO/Upgrades#Upgrades-PEMPhoenix">PEM Phoenix upgrade method</a>. The process of booting the node into Phoenix has several phases:<ol>
              <li>LCM stages one half of the files required for the Phoenix OS on the current host boot disk while the other half is placed on the CVM of the upgrading node in the ~/home/nutanix/tmp/lcm_staging directory.</li>
              <li>LCM then modifies the GRUB configuration such that, on the next reboot, the node will boot into an intermediary OS called "Centaur". This is done using the files that were staged on the host boot disk. The CVM IP of the upgrading node is configured in Centaur, so you can ping. However, the SSH packages have not yet been extracted so you cannot SSH into the OS. Only IPMI Remote Console access is possible.</li>
              <li>From the Centaur prompt, the software raid for the local CVM is assembled and /home is mounted. With this done, the remaining files that were staged on the CVM can be extracted and Phoenix loads fully. At this point, SSH access into Phoenix is possible and the upgrade task begins.</li>
            </ol>
          </td>
          <td>See above.</td>
          <td>
            <ul>
              <li>If phoenix is network-accessible: <a href="http://portal.nutanix.com/kb/9437">Run the LCM Node Recovery script from a working CVM.</a>
              </li>
              <li>If phoenix is not accessible over the network: Run the reboot_to_host.py script from the Phoenix shell.</li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
  </ac:rich-text-body>
</ac:structured-macro>
<ac:structured-macro ac:macro-id="2cf8b601-8bbd-4a0b-8487-d813bc3ebd95" ac:name="expand" ac:schema-version="1">
  <ac:parameter ac:name="title">Host Boot Disk Repair (Failed)</ac:parameter>
  <ac:rich-text-body>
    <table class="wrapped">
      <tbody>
        <tr>
          <th>Feature</th>
          <th>How it Uses Phoenix</th>
          <th>How it boots in Phoenix</th>
          <th>How to boot out of Phoenix</th>
        </tr>
        <tr>
          <td>Host Boot Disk Repair (Failed)</td>
          <td>Host boot disk repair feature is intended to automate imaging of the hypervisor when the current boot device(s) have been replaced due to failure. It can also be used for recovery when the current hypervisor OS instance has suffered from software corruption. Similar to Foundation, Phoenix is used by HBDR as a network-accessible OS that runs on the bare-metal while the hypervisor is being imaged (or reimaged) on the target node. Refer to <a href="http://portal.nutanix.com/kb/5013">KB-5013</a> for full details on the feature. Phoenix is invoked using different methods depending on which type of operation you select in the Host Boot Disk Repair Prism UI.</td>
          <td>After the user selects which node they wish to repair, the Prism UI provides them with a download link for a Phoenix ISO. This ISO has the network configuration of the CVM baked-into it. After attaching the phoenix.iso to the node using IPMI Remote Console and rebooting the node, it will boot into the Phoenix shell with the local CVM IP address assigned to it. Once a session is established between the Genesis Leader CVM and Phoenix, the installation of the hypervisor is started using the Foundation service.</td>
          <td>
            <ol>
              <li>Unplug the Phoenix ISO from the IPMI Remote Console. If there is none connected, perform an iKVM Reset or BMC warm reset from the IPMI Web UI.</li>
              <li>If the hypervisor installation was unsuccessful, create a Phoenix ISO manually containing a hypervisor image and then perform action "Install and Configure Hypervisor" at the Installer Menu.</li>
            </ol>
          </td>
        </tr>
      </tbody>
    </table>
  </ac:rich-text-body>
</ac:structured-macro>
<ac:structured-macro ac:macro-id="f2e3d125-cfeb-4014-bef5-2e1b05aa6aca" ac:name="expand" ac:schema-version="1">
  <ac:parameter ac:name="title">Host Boot Disk Repair (Graceful/Proactive)</ac:parameter>
  <ac:rich-text-body>
    <table class="wrapped">
      <tbody>
        <tr>
          <th>Feature</th>
          <th>How it Uses Phoenix</th>
          <th>How it boots in Phoenix</th>
          <th>How to boot out of Phoenix</th>
        </tr>
        <tr>
          <td>Host Boot Disk Repair (Graceful/Proactive)</td>
          <td>In cases where the user receives an alert that their host boot disk has registered uncorrectable errors or has signs of wear, the Graceful variant of HBDR offers the ability to proactively take a temporary clone of the current hypervisor OS instance to CVM storage. Later, once the host boot media is physically replaced, the feature can restore the original OS image onto the new boot disk. This way, the original hypervisor state and configuration are all preserved. Similar to Foundation, Phoenix is used by HBDR as a network-accessible OS that runs on the bare-metal while the hypervisor is being imaged (or reimaged) on the target node. Refer to <a href="http://portal.nutanix.com/kb/5013">KB-5013</a> for full details on the feature. Phoenix is invoked using different methods depending on which type of operation you select in the Host Boot Disk Repair Prism UI.</td>
          <td>
            <strong>Graceful (Proactive) Host Boot Disk Repair</strong>
            <ol>
              <li>Phase 1 - Upon selecting which node you wish to perform a proactive replacement of its host boot disk, the Genesis Leader will use Foundation reboot_to_phoenix APIs to make the target node boot into phoenix. This is done through Method B: staging the files for Phoenix on the current host boot disk and then modifying the GRUB configuration so that the host loads Phoenix instead of its regular hypervisor. Upon booting into the phoenix shell, the node assumes the local CVM IP address and then proceeds to clone the hypervisor OS image to CVM data drive.</li>
              <li>Phase 2 - Once the clone is taken, the Prism UI will instruct the user to proceed and replace the physical host boot media and offer them a download link for a separate Phoenix ISO. After the new host boot device is installed, the user should mount this Phoenix ISO to the node through IPMI Remote Console. After booting up into the new Phoenix shell, the local CVM IP address is assumed and the clone of the Hypervisor is restored from the CVM data drive onto the new host boot device. At the end of the restore, the user unplugs the Phoenix ISO from IPMI and reboots. Finally, the original hypervisor loads up as normal.</li>
            </ol>
          </td>
          <td>
            <strong>Graceful (Proactive)</strong>
            <ol>
              <li>If a problem was encountered at Phase 1, in which the clone is supposed to be taken, then follow the steps in <a href="http://portal.nutanix.com/kb/5013">KB-5013</a> Internal Comments below the header "Host to identify the serial number of the data drive that contains the M.2 clone image". Delete the clone image and then run the "reboot_to_host.py" script to boot back into the original hypervisor.</li>
              <li>If a problem is encountered during Phase 2, when the clone is restored, unplug the Phoenix ISO from the IPMI Remote Console. If there is none connected, perform an iKVM Reset or BMC warm reset from the IPMI Web UI. If the hypervisor restore was not complete, create a Phoenix ISO manually containing a hypervisor image and then perform action "Install and Configure Hypervisor" at the Installer Menu.</li>
            </ol>
          </td>
        </tr>
      </tbody>
    </table>
  </ac:rich-text-body>
</ac:structured-macro>
<ac:structured-macro ac:macro-id="19967248-454c-440d-aeaf-4b0fdfeb2c95" ac:name="expand" ac:schema-version="1">
  <ac:parameter ac:name="title">In-Place Hypervisor Conversion</ac:parameter>
  <ac:rich-text-body>
    <table class="wrapped">
      <tbody>
        <tr>
          <th>Feature</th>
          <th>How it Uses Phoenix</th>
          <th>How it boots in Phoenix</th>
          <th>How to boot out of Phoenix</th>
        </tr>
        <tr>
          <td>In-Place Hypervisor Conversion</td>
          <td>This feature is used to convert clusters that were originally imaged with ESXi hypervisor over to AHV. It can also facilitate a rollback from ESXi to AHV if desired. It does not offer the ability to convert clusters natively installed with AHV over to ESXi. The feature converts nodes one at a time to facilitate minimal downtime for user workloads. The hypervisor conversion feature uses Phoenix as a network-accessible OS that runs on the bare-metal while the hypervisor on each node is being reimaged.</td>
          <td>Each node in the cluster is evacuated of User VMs one-at-a-time and then booted into Phoenix, where the hypervisor is reimaged. This is done through Method B: staging the files for Phoenix on the current host boot disk and then modifying the GRUB configuration so that the host loads Phoenix instead of its regular hypervisor. Phoenix assumes the network configuration of the local CVM and establishes a session to the Genesis Leader CVM. From here, the hypervisor is reimaged using the Foundation service. At the end of the installation, the node is automatically rebooted and loads the intended hypervisor.</td>
          <td>
            <ul>
              <li>If the current hypervisor image is functional: Run the reboot_to_host.py script from the Phoenix shell.</li>
              <li>If the current hypervisor image is not working: Do not attempt manual recovery. Consult the logs cited in <a href="http://portal.nutanix.com/kb/3040">KB-3040</a> to find the specific cause of the failure and take action as specified for this scenario.</li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
  </ac:rich-text-body>
</ac:structured-macro>
<h1>Capabilities of Stand-Alone Phoenix</h1>
<p>The scenarios below describe what you can do with stand-alone Phoenix. Expand each section to see required installers, menu options, outcomes, and important advisories in a focused table.</p>
<ac:structured-macro ac:macro-id="f3198f36-be4e-4949-99ac-fb6abd8ec49f" ac:name="expand" ac:schema-version="1">
  <ac:parameter ac:name="title">Install the Controller VM and configure the hypervisor</ac:parameter>
  <ac:rich-text-body>
    <table class="wrapped relative-table" style="width: 99.963%;">
      <colgroup> <col style="width: 12.1009%;"/> <col style="width: 11.2814%;"/> <col style="width: 8.87081%;"/> <col style="width: 14.3186%;"/> <col style="width: 11.0403%;"/> <col style="width: 13.8365%;"/> <col style="width: 28.5409%;"/> </colgroup>
      <tbody>
        <tr>
          <th rowspan="2">User Intent</th>
          <th rowspan="2">Installers to be Included in the Phoenix Image</th>
          <th colspan="3">Installer Menu Field Values</th>
          <th rowspan="2">Outcomes</th>
          <th rowspan="2">Advisories</th>
        </tr>
        <tr>
          <th>Choose Action</th>
          <th>Choose Hypervisor</th>
          <th>Choose AOS</th>
        </tr>
        <tr>
          <td>Install the Controller VM and configure the hypervisor</td>
          <td>Installer of the desired version of AOS</td>
          <td>Install CVM (Wipes Existing Data!)</td>
          <td>Not applicable - The currently installed hypervisor will be preserved.</td>
          <td>AOS version you want to install from the Phoenix ISO</td>
          <td>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="2705" ac:name="check mark button"/> <span> Available for Cluster Expansion or Creation</span>
            </p>
            <p style="text-align: left;">
              <span> <ac:emoticon ac:emoji-id="2705" ac:name="check mark button"/> Hypervisor Instance Preserved</span>
            </p>
            <p style="text-align: left;">
              <span> <ac:emoticon ac:emoji-id="2705" ac:name="check mark button"/> Hypervisor Logs Preserved</span>
            </p>
            <p style="text-align: left;">
              <span> <ac:emoticon ac:emoji-id="274c" ac:name="cross mark"/> User Data Destroyed</span>
            </p>
            <p style="text-align: left;">
              <span> <ac:emoticon ac:emoji-id="274c" ac:name="cross mark"/> AOS Instance Destroyed</span>
            </p>
            <p style="text-align: left;">
              <span> <ac:emoticon ac:emoji-id="274c" ac:name="cross mark"/> Cluster Configuration Destroyed</span>
            </p>
            <p style="text-align: left;">
              <span> <ac:emoticon ac:emoji-id="274c" ac:name="cross mark"/> CVM Logs Destroyed</span>
            </p>
          </td>
          <td>
            <ul>
              <li>Intended for cases where a hypervisor was just freshly installed (not previously configured by Phoenix or Foundation) and the current CVM instance needs not be preserved.</li>
              <li>Suitable for nodes which are fresh from the factory or which are being repurposed for a new cluster.</li>
              <li>Not safe for use on nodes which are still logical members of a production cluster. Nodes must be logically removed before performing actions that are destructive of User Data.</li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
    <ac:structured-macro ac:macro-id="4cf65255-fd58-43f1-93e1-0806c50a64c4" ac:name="note" ac:schema-version="1">
      <ac:rich-text-body>
        <p>The use of Phoenix ISOs containing AOS is only supported under the direct supervision of Nutanix Customer Support.</p>
      </ac:rich-text-body>
    </ac:structured-macro>
  </ac:rich-text-body>
</ac:structured-macro>
<ac:structured-macro ac:macro-id="c4b2a876-8111-4305-8762-9c0694d47e2c" ac:name="expand" ac:schema-version="1">
  <ac:parameter ac:name="title">Install the Controller VM and install and configure the hypervisor</ac:parameter>
  <ac:rich-text-body>
    <table class="wrapped">
      <tbody>
        <tr>
          <th rowspan="2">User Intent</th>
          <th rowspan="2">Installers to be Included in the Phoenix Image</th>
          <th colspan="3">Installer Menu Field Values</th>
          <th rowspan="2">Outcomes</th>
          <th rowspan="2">Advisories</th>
        </tr>
        <tr>
          <th>Choose Action</th>
          <th>Choose Hypervisor</th>
          <th>Choose AOS</th>
        </tr>
        <tr>
          <td>Install the Controller VM and install and configure the hypervisor</td>
          <td>Installers of the desired versions of AOS and the hypervisor</td>
          <td>Install CVM (Wipes Existing Data!) and Install, Configure Hypervisor</td>
          <td>Hypervisor you want to install</td>
          <td>AOS version you want to install</td>
          <td>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="2705" ac:name="check mark button"/> <span> </span>Available for Cluster Expansion or Creation</p>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="274c" ac:name="cross mark"/> <span> </span>User Data Destroyed</p>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="274c" ac:name="cross mark"/> <span> </span>AOS Instance Destroyed</p>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="274c" ac:name="cross mark"/> <span> </span>Cluster Configuration Destroyed</p>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="274c" ac:name="cross mark"/> <span> </span>CVM Logs Destroyed</p>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="274c" ac:name="cross mark"/> <span> </span>Hypervisor Instance Destroyed</p>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="274c" ac:name="cross mark"/> <span> </span>Hypervisor Logs Destroyed</p>
          </td>
          <td>
            <ul>
              <li>Accomplishes full-node reimaging (factory fresh, from a software standpoint).</li>
              <li>Not safe for use on nodes which are still logical members of a production cluster. Nodes must be logically removed before performing actions that are destructive of User Data.</li>
              <li>Foundation is the preferred tool for this type of activity. Phoenix should be used only in cases where Foundation requirements cannot be satisfied.</li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
    <ac:structured-macro ac:macro-id="55d17736-7543-409a-b90d-7012b3e4fd2a" ac:name="note" ac:schema-version="1">
      <ac:rich-text-body>
        <p>The use of Phoenix ISOs containing AOS is only supported under the direct supervision of Nutanix Customer Support.</p>
      </ac:rich-text-body>
    </ac:structured-macro>
  </ac:rich-text-body>
</ac:structured-macro>
<ac:structured-macro ac:macro-id="a4adb686-f957-4e6b-9436-3ea9cb057e70" ac:name="expand" ac:schema-version="1">
  <ac:parameter ac:name="title">Configure the hypervisor without installing the Controller VM</ac:parameter>
  <ac:rich-text-body>
    <table class="wrapped">
      <tbody>
        <tr>
          <th rowspan="2">User Intent</th>
          <th rowspan="2">Installers to be Included in the Phoenix Image</th>
          <th colspan="3">Installer Menu Field Values</th>
          <th rowspan="2">Outcomes</th>
          <th rowspan="2">Advisories</th>
        </tr>
        <tr>
          <th>Choose Action</th>
          <th>Choose Hypervisor</th>
          <th>Choose AOS</th>
        </tr>
        <tr>
          <td>Configure the hypervisor without installing the Controller VM</td>
          <td>No installers required. You can use any stand-alone Phoenix ISO, including the Phoenix ISO downloaded from the Nutanix support portal.</td>
          <td>Configure Hypervisor</td>
          <td>Automatically detected</td>
          <td>Automatically detected</td>
          <td>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="2705" ac:name="check mark button"/> <span> </span>User Data Preserved</p>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="2705" ac:name="check mark button"/> <span> </span>AOS Instance Preserved</p>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="2705" ac:name="check mark button"/> <span> </span>Cluster Configuration Preserved</p>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="2705" ac:name="check mark button"/> <span> </span>CVM Logs Preserved</p>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="2705" ac:name="check mark button"/> <span> </span>Hypervisor Instance Preserved</p>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="2705" ac:name="check mark button"/> <span> </span>Hypervisor Logs Preserved</p>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="274c" ac:name="cross mark"/> <span> </span>Available for Cluster Expansion or Creation</p>
          </td>
          <td>
            <ul>
              <li>Intended for cases where a hypervisor was just freshly installed from media obtained from the hypervisor manufacturer (not previously configured by Phoenix or Foundation).</li>
              <li>Configures a recently installed hypervisor to work with the AOS software currently installed on the local CVM.</li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
  </ac:rich-text-body>
</ac:structured-macro>
<ac:structured-macro ac:macro-id="d0ee5ea9-69e5-4f0b-ab56-a49dac60e5f4" ac:name="expand" ac:schema-version="1">
  <ac:parameter ac:name="title">Install and configure the hypervisor without installing the Controller VM</ac:parameter>
  <ac:rich-text-body>
    <table class="wrapped">
      <tbody>
        <tr>
          <th rowspan="2">User Intent</th>
          <th rowspan="2">Installers to be Included in the Phoenix Image</th>
          <th colspan="3">Installer Menu Field Values</th>
          <th rowspan="2">Outcomes</th>
          <th rowspan="2">Advisories</th>
        </tr>
        <tr>
          <th>Choose Action</th>
          <th>Choose Hypervisor</th>
          <th>Choose AOS</th>
        </tr>
        <tr>
          <td>Install and configure the hypervisor without installing the Controller VM</td>
          <td>Installer of the desired hypervisor.</td>
          <td>Install, Configure Hypervisor</td>
          <td>Automatically set</td>
          <td>Automatically detected</td>
          <td>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="2705" ac:name="check mark button"/> <span> </span>User Data Preserved</p>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="2705" ac:name="check mark button"/> <span> </span>AOS Instance Preserved</p>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="2705" ac:name="check mark button"/> <span> </span>Cluster Configuration Preserved</p>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="2705" ac:name="check mark button"/> <span> </span>CVM Logs Preserved</p>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="274c" ac:name="cross mark"/> <span> </span>Hypervisor Instance Preserved</p>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="274c" ac:name="cross mark"/> <span> </span>Hypervisor Logs Preserved</p>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="274c" ac:name="cross mark"/> <span> </span>Available for Cluster Expansion or Creation</p>
          </td>
          <td>
            <ul>
              <li>To be performed in cases where the current hypervisor instance is deemed to be corrupted or when the host boot disks(s) have been replaced.</li>
              <li>The hypervisor will be installed fresh and configured to work with the existing CVM.</li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
  </ac:rich-text-body>
</ac:structured-macro>
<ac:structured-macro ac:macro-id="c6243843-8ebb-48cc-a504-56b8ed03bfef" ac:name="expand" ac:schema-version="1">
  <ac:parameter ac:name="title">Recreate (Repair) the Controller VM</ac:parameter>
  <ac:rich-text-body>
    <table class="wrapped">
      <tbody>
        <tr>
          <th rowspan="2">User Intent</th>
          <th rowspan="2">Installers to be Included in the Phoenix Image</th>
          <th colspan="3">Installer Menu Field Values</th>
          <th rowspan="2">Outcomes</th>
          <th rowspan="2">Advisories</th>
        </tr>
        <tr>
          <th>Choose Action</th>
          <th>Choose Hypervisor</th>
          <th>Choose AOS</th>
        </tr>
        <tr>
          <td>Recreate (Repair) the Controller VM</td>
          <td>AOS installer whose version matches that of the currently installed AOS</td>
          <td>Repair CVM (Preserves Data)</td>
          <td>Not applicable</td>
          <td>Automatically set</td>
          <td>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="2705" ac:name="check mark button"/> <span> </span>User Data Preserved</p>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="2705" ac:name="check mark button"/> <span> </span>Hypervisor Instance Preserved</p>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="2705" ac:name="check mark button"/> <span> </span>Hypervisor Logs Preserved</p>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="274c" ac:name="cross mark"/> <span> </span>AOS Instance Destroyed</p>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="274c" ac:name="cross mark"/> <span> </span>Cluster Configuration Destroyed</p>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="274c" ac:name="cross mark"/> <span> </span>CVM Logs Destroyed</p>
            <p style="text-align: left;">
              <ac:emoticon ac:emoji-id="274c" ac:name="cross mark"/> <span> </span>Available for Cluster Expansion or Creation</p>
          </td>
          <td>
            <ul>
              <li>Never permitted for use on single-node clusters</li>
              <li>Not for use in two-node clusters without STL approval</li>
              <li>Not for use during AOS upgrades without DevEx approval</li>
              <li>If the CVM infrastructure partitions are corrupt but the hypervisor is still functioning, please use the single_ssd_repair script to recover instead of Phoenix Repair. It is much more expedient. Phoenix Repair should only be used when there is a bug identified that prevents use of single_ssd_repair or if you need to bundle this action with hypervisor-related operations.</li>
              <li>Following this action, the CVM configuration will be lost and the boot_disk_replace script must be employed to restore its original identity.</li>
              <li>If the hypervisor is functional, the preferred tool for accomplishing CVM repair is the single_ssd_repair script.</li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
    <ac:structured-macro ac:macro-id="fad6fb67-afe7-4c1b-b4e3-41e0edf3a476" ac:name="note" ac:schema-version="1">
      <ac:rich-text-body>
        <p>The use of Phoenix ISOs containing AOS is only supported under the direct supervision of Nutanix Customer Support.</p>
      </ac:rich-text-body>
    </ac:structured-macro>
  </ac:rich-text-body>
</ac:structured-macro>
<h1>Resources and Useful Links</h1>
<ul>
  <li>Useful Slack Channel: <strong>#tc_core</strong>
  </li>
  <li>
    <a href="https://nutanix.lightning.force.com/lightning/r/Knowledge_Base__kav/ka0VO000000D4qbYAC/view">KB-3517: Modify the Hostname of the Controller VM</a>
  </li>
  <li>
    <a href="https://nutanix.lightning.force.com/lightning/r/Knowledge_Base__kav/ka0VO000000GCzhYAG/view">KB-2925: Rename AHV (Acropolis) hosts</a>
  </li>
  <li>
    <a href="https://portal.nutanix.com/page/documents/details?targetId=Web-Console-Guide-Prism-v7_3:wc-cluster-expand-wc-t.html">Expand Cluster Documentation</a>
  </li>
</ul>
<p>
  <ac:structured-macro ac:macro-id="9194b66d-311e-4b81-a3b7-4cb1911908b4" ac:name="macrosuite-button" ac:schema-version="1">
    <ac:parameter ac:name="macroId">rC5a5Lc8KpDDv5TXp4bt-</ac:parameter>
    <ac:parameter ac:name="data">JTdCJTIyYnV0dG9uVHlwZSUyMiUzQSUyMmljb25fcmlnaHQlMjIlMkMlMjJidXR0b25TaXplJTIyJTNBJTIybGFyZ2UlMjIlMkMlMjJidXR0b25UZXh0JTIyJTNBJTIyUHJvY2VlZCUyMHRvJTIwQ2hhcHRlciUyMDMlM0ElMjBDcmVhdGluZyUyMGElMjBQaG9lbml4JTIwSVNPJTIyJTJDJTIyYnV0dG9uUmFkaXVzJTIyJTNBMSUyQyUyMmJ1dHRvbldpZHRoJTIyJTNBMjAlMkMlMjJidXR0b25Db2xvciUyMiUzQSUyMiUyMzAwMDAwMDAwJTIyJTJDJTIyYnV0dG9uRm9udENvbG9yJTIyJTNBJTIyJTIzMDA2NWZmZmYlMjIlMkMlMjJidXR0b25Cb3JkZXJDb2xvciUyMiUzQSUyMiUyMzAwMDAwMDAwJTIyJTJDJTIyYnV0dG9uTGluayUyMiUzQSUyMiU3QiU1QyUyMmlkJTVDJTIyJTNBJTVDJTIyNDMxMzI4Mjk0JTVDJTIyJTJDJTVDJTIybGluayU1QyUyMiUzQSU1QyUyMiUyRnglMkZKb3kxR1ElNUMlMjIlMkMlNUMlMjJ0aXRsZSU1QyUyMiUzQSU1QyUyMkRSQUZUJTIwLSUyMENyZWF0aW5nJTIwYSUyMFBob2VuaXglMjBJU08lNUMlMjIlMkMlNUMlMjJ0eXBlJTVDJTIyJTNBJTVDJTIycGFnZSU1QyUyMiUyQyU1QyUyMnNvdXJjZSU1QyUyMiUzQSU1QyUyMnBhZ2UlNUMlMjIlN0QlMjIlMkMlMjJidXR0b25OZXdUYWIlMjIlM0ElMjJ0cnVlJTIyJTJDJTIyYnV0dG9uTmV3TGluayUyMiUzQSUyMiUyMiUyQyUyMmJ1dHRvbkljb24lMjIlM0ElMjJib290c3RyYXAlMkZBcnJvd1JpZ2h0Q2lyY2xlJTIyJTJDJTIyYnV0dG9uSG92ZXJDb2xvciUyMiUzQSUyMnRyYW5zcGFyZW50JTIyJTJDJTIyYnV0dG9uQm9yZGVySG92ZXJDb2xvciUyMiUzQSUyMiUyMzAwMDAwMDAwJTIyJTJDJTIyYnV0dG9uRm9udEhvdmVyQ29sb3IlMjIlM0ElMjIlMjMwMDAwMDAwMCUyMiUyQyUyMmJ1dHRvbkljb25Ib3ZlckNvbG9yJTIyJTNBJTIyJTIzMDAwMDAwMDAlMjIlMkMlMjJpc0J1dHRvblNoYWRvd09uJTIyJTNBdHJ1ZSUyQyUyMmJ1dHRvbkljb25Db2xvciUyMiUzQSUyMiUyMzAwNjVmZmZmJTIyJTJDJTIyYnV0dG9uV2lkdGhEZXRlY3Rpb24lMjIlM0E2MCUyQyUyMmVtb2ppRW5hYmxlZCUyMiUzQWZhbHNlJTJDJTIyZW1vamklMjIlM0ElMjIlN0IlN0QlMjIlN0Q=</ac:parameter>
  </ac:structured-macro>
</p>
